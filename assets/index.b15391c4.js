var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o;export function __vite_legacy_guard(){import("data:text/javascript,")}import{c as i,a as c,d as l,u as d,j as p,F as u,r as h,R as m,b as g,e as _,f as v,P as f}from"./vendor.7f6d9e1b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class y{constructor(e,t=!1){this.id=Date.now().toString()+e+t.toString(),this.text=e,this.isDone=t}}const b=[new y("Помыть посуду",!1),new y("Написать книгу",!0),new y("Написать вторую книгу",!1),new y("Посмотреть телевизор",!0)],w=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(r){localStorage.removeItem(e)}};let x=[...b];localStorage.getItem("todos")?x=(e=>{try{const t=localStorage.getItem(e);if(!t)return;return JSON.parse(t)}catch(t){return}})("todos"):w("todos",x);const N=c(i({todos:(e=[],i)=>{switch(i.type){case"todos/add":return[...e,new y(i.payload,!1)];case"todos/remove":return e.filter((e=>e.id!==i.payload));case"todos/toggle":return e.map(((e,c)=>{return e.id!==i.payload?e:(l=((e,t)=>{for(var r in t||(t={}))n.call(t,r)&&a(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&a(e,r,t[r]);return e})({},e),d={isDone:!e.isDone},t(l,r(d)));var l,d}));case"todos/resetToSamples":return[...b];default:return e}},filter:(e="all",t)=>"filter/set"===t.type?t.payload:e}),{todos:x});N.subscribe(l((()=>w("todos",N.getState().todos)),500,{leading:!0,trailing:!0,maxWait:1e3}));const O=()=>{const e=d((e=>e.todos)),t=e.filter((e=>!e.isDone)).length;return p(u,{children:[p("div",{children:["Всего задач: ",e.length]}),p("div",{children:["Осталось выполнить: ",t]})]})};var j,k="_flex-wrapper_1mxqa_1",S="_input_1mxqa_10",I="_add-button_1mxqa_29",C="_add-icon_1mxqa_37";function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},E.apply(this,arguments)}var L=function(e){return h.exports.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:36,height:36,fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round"},e),"\x3c!--! Atomicons Free 1.00 by @atisalab License -\n    https://atomicons.com/license/ (Icons: CC BY 4.0) Copyright 2021 Atomicons --\x3e",j||(j=h.exports.createElement("path",{d:"M18.4 20.8 12 16l-6.4 4.8A1 1 0 0 1 4 20V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v16a1 1 0 0 1-1.6.8ZM12 6v6M15 9H9"})))};const q=()=>{const e=m.createRef(),t=g();return p("div",{className:k,children:[_("textarea",{placeholder:"Введите задачу",rows:"1",required:!0,className:S,ref:e,onInput:e=>{const t=e.target.offsetHeight-e.target.clientHeight;e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+t+"px"}}),_("button",{onClick:r=>{const o=e.current,n=o.value.trim();o.value="",o.style.height="auto",n&&t({type:"todos/add",payload:n})},className:`button ${I}`,children:_(L,{className:C})})]})};var D,P={listItem:"_list-item_1hwsp_1",listItem__inner:"_list-item__inner_1hwsp_26",checkbox:"_checkbox_1hwsp_34",text:"_text_1hwsp_40",done:"_done_1hwsp_60",removeButton:"_remove-button_1hwsp_69",removeIcon:"_remove-icon_1hwsp_77",focusVisible:"_focus-visible_1hwsp_1"};function A(){return A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},A.apply(this,arguments)}var B=function(e){return h.exports.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2},e),D||(D=h.exports.createElement("path",{d:"m0 0 24 24M24 0 0 24"})))};const M=e=>{const t=d((t=>t.todos[e.index])),r=g();let o=!1;const n=h.exports.createRef(),[s,a]=h.exports.useState(e.visible),i=(e=!1)=>{const o=n.current;o.style.border=0,o.style.height=getComputedStyle(o).height,requestAnimationFrame((()=>{o.style.height=0})),e&&c(o,"height",(()=>r({type:"todos/remove",payload:t.id})))},c=(e,t,r)=>{const o=e=>{e.propertyName===t&&(r(),e.target.removeEventListener("transitionend",o))};e.addEventListener("transitionend",o)};h.exports.useEffect((()=>{!s&&e.visible&&a(!0),s&&!e.visible&&(i(),c(n.current,"height",(()=>a(!1))))}),[e.visible]),h.exports.useLayoutEffect((()=>{s&&(()=>{const e=n.current,t=getComputedStyle(e).height;e.style.height=0,requestAnimationFrame((()=>{e.style.height=t}))})()}),[s]);const l=[P.text,t.isDone?P.done:""].join(" ");return s?_("li",{ref:n,className:P.listItem,children:p("label",{className:P.listItem__inner,children:[_("input",{type:"checkbox",checked:t.isDone,onChange:e=>{r({type:"todos/toggle",payload:t.id})},className:P.checkbox}),_("span",{className:l,children:t.text}),_("button",{onClick:e=>{o||(o=!0,i(!0))},className:`button ${P.removeButton}`,children:_(B,{className:P.removeIcon})})]})}):null};var F="_todo-list_qu5mk_1",H="_list_qu5mk_5";const R=()=>{const e=d((e=>e.todos)),t=d((e=>e.filter)),r=e.map(((e,r)=>{let o=!1;return"all"===t&&(o=!0),"done"===t&&e.isDone&&(o=!0),"not done"!==t||e.isDone||(o=!0),_(M,{index:r,visible:o},e.id)}));return _("div",{className:F,children:_("ul",{className:H,children:r})})};var $="_filter-select_xq55b_1";const J=()=>{const e=d((e=>e.filter)),t=g();return p("select",{value:e,className:$,onChange:e=>t({type:"filter/set",payload:e.target.value}),children:[_("option",{value:"all",children:"Все"}),_("option",{value:"done",children:"Выполненные"}),_("option",{value:"not done",children:"Не выполненные"})]})};var T,V,W="_reset-button_9jh3y_1",Y="_reset-icon_9jh3y_9";function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},K.apply(this,arguments)}var Z=function(e){return h.exports.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:36,height:36,fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round"},e),"\x3c!--! Atomicons Free 1.00 by @atisalab License -\n    https://atomicons.com/license/ (Icons: CC BY 4.0) Copyright 2021 Atomicons --\x3e",T||(T=h.exports.createElement("path",{d:"M3 9h12.5a5.5 5.5 0 0 1 5.5 5.5h0a5.5 5.5 0 0 1-5.5 5.5H12"})),V||(V=h.exports.createElement("path",{d:"M8 4 3 9l5 5"})))};const z=()=>{const e=g();return _("button",{onClick:()=>e({type:"todos/resetToSamples"}),className:`button ${W}`,children:_(Z,{className:Y})})};var G="_app_1gc3m_27",Q="_wrapper_1gc3m_38",U="_reset-button-wrapper_1gc3m_45",X="_counter-wrapper_1gc3m_52";const ee=()=>p("div",{className:G,children:[p("div",{className:Q,children:[_("div",{className:U,children:_(z,{})}),_("div",{className:X,children:_(O,{})})]}),_(q,{}),_(J,{}),_(R,{})]});v.render(_(m.StrictMode,{children:_(f,{store:N,children:_(ee,{})})}),document.getElementById("root"));

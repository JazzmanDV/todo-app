var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o;export function __vite_legacy_guard(){import("data:text/javascript,")}import{c as a,a as c,d as l,u as d,j as u,F as p,r as h,b as m,e as _,R as g,f as v,P as f}from"./vendor.af5eed3d.js";var y;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),(y||(y={})).SET="filter/set";class b{constructor(e,t=!1){this.id=Date.now().toString()+e+t.toString(),this.text=e,this.isDone=t}}const w=[new b("Помыть посуду",!1),new b("Написать книгу",!0),new b("Написать вторую книгу",!1),new b("Посмотреть телевизор",!0)];var x,O;(O=x||(x={})).ADD="todos/add",O.REMOVE="todos/remove",O.TOGGLE="todos/toggle",O.RESET_TO_SAMPLES="todos/resetToSamples";var E;(E||(E={})).TODOS="todos";const S=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(r){localStorage.removeItem(e)}};let N=[...w];localStorage.getItem(E.TODOS)?N=(e=>{try{const t=localStorage.getItem(e);if(!t)return;return JSON.parse(t)}catch(t){return}})(E.TODOS):S(E.TODOS,N);const D=c(a({todos:(e=[],a)=>{switch(a.type){case x.ADD:return[...e,new b(a.payload,!1)];case x.REMOVE:return e.filter((e=>e.id!==a.payload));case x.TOGGLE:return e.map((e=>{return e.id!==a.payload?e:(c=((e,t)=>{for(var r in t||(t={}))n.call(t,r)&&i(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&i(e,r,t[r]);return e})({},e),l={isDone:!e.isDone},t(c,r(l)));var c,l}));case x.RESET_TO_SAMPLES:return[...w];default:return e}},filter:(e="all",t)=>t.type===y.SET?t.payload:e}),{todos:N});D.subscribe(l((()=>S(E.TODOS,D.getState().todos)),500,{leading:!0,trailing:!0,maxWait:1e3}));const j=()=>{const e=d((e=>e.todos)),t=e.filter((e=>!e.isDone)).length;return u(p,{children:[u("div",{children:["Всего задач: ",e.length]}),u("div",{children:["Осталось выполнить: ",t]})]})};var k,L="_flex-wrapper_1mxqa_1",T="_input_1mxqa_10",I="_add-button_1mxqa_29",A="_add-icon_1mxqa_37";function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},C.apply(this,arguments)}var M=function(e){return h.exports.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:36,height:36,fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round"},e),"\x3c!--! Atomicons Free 1.00 by @atisalab License -\n    https://atomicons.com/license/ (Icons: CC BY 4.0) Copyright 2021 Atomicons --\x3e",k||(k=h.exports.createElement("path",{d:"M18.4 20.8 12 16l-6.4 4.8A1 1 0 0 1 4 20V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v16a1 1 0 0 1-1.6.8ZM12 6v6M15 9H9"})))};const P=()=>{const e=h.exports.useRef(null),t=m();return u("div",{className:L,children:[_("textarea",{placeholder:"Введите задачу",rows:1,required:!0,className:T,ref:e,onInput:e=>{const t=e.target.offsetHeight-e.target.clientHeight;e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+t+"px"}}),_("button",{onClick:()=>{const r=e.current;if(!r)return;const o=r.value.trim();r.value="",r.style.height="auto",o&&t({type:x.ADD,payload:o})},className:`button ${I}`,children:_(M,{className:A})})]})};var q,R={listItem:"_list-item_1hwsp_1",listItem__inner:"_list-item__inner_1hwsp_26",checkbox:"_checkbox_1hwsp_34",text:"_text_1hwsp_40",done:"_done_1hwsp_60",removeButton:"_remove-button_1hwsp_69",removeIcon:"_remove-icon_1hwsp_77",focusVisible:"_focus-visible_1hwsp_1"};function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},B.apply(this,arguments)}var F=function(e){return h.exports.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2},e),q||(q=h.exports.createElement("path",{d:"m0 0 24 24M24 0 0 24"})))};const G=e=>{const t=d((t=>t.todos[e.index])),r=m();let o=!1;const n=h.exports.useRef(null),[s,i]=h.exports.useState(e.visible),a=(e=!1)=>{const o=n.current;o&&(o.style.border="0",o.style.height=getComputedStyle(o).height,requestAnimationFrame((()=>{o.style.height="0"})),e&&c(o,"height",(()=>r({type:x.REMOVE,payload:t.id}))))},c=(e,t,r)=>{const o=e=>{e.propertyName===t&&(r(),e.target.removeEventListener("transitionend",o))};e.addEventListener("transitionend",o)};h.exports.useEffect((()=>{if(!s&&e.visible&&i(!0),s&&!e.visible){if(!n.current)return;a(),c(n.current,"height",(()=>i(!1)))}}),[e.visible]),h.exports.useLayoutEffect((()=>{s&&(()=>{const e=n.current;if(!e)return;const t=getComputedStyle(e).height;requestAnimationFrame((()=>{e.style.height="0",requestAnimationFrame((()=>{e.style.height=t}))}))})()}),[s]);const l=[R.text,t.isDone?R.done:""].join(" ");return s?_("li",{ref:n,className:R.listItem,children:u("label",{className:R.listItem__inner,children:[_("input",{type:"checkbox",checked:t.isDone,onChange:()=>{r({type:x.TOGGLE,payload:t.id})},className:R.checkbox}),_("span",{className:l,children:t.text}),_("button",{onClick:()=>{o||(o=!0,a(!0))},className:`button ${R.removeButton}`,children:_(F,{className:R.removeIcon})})]})}):null};var H="_todo-list_qu5mk_1",V="_list_qu5mk_5";const $=()=>{const e=d((e=>e.todos)),t=d((e=>e.filter)),r=e.map(((e,r)=>{let o=!1;return"all"===t&&(o=!0),"done"===t&&e.isDone&&(o=!0),"not done"!==t||e.isDone||(o=!0),_(G,{index:r,visible:o},e.id)}));return _("div",{className:H,children:_("ul",{className:V,children:r})})};var J="_filter-select_xq55b_1";const W=()=>{const e=d((e=>e.filter)),t=m();return u("select",{value:e,className:J,onChange:e=>t({type:y.SET,payload:e.target.value}),children:[_("option",{value:"all",children:"Все"}),_("option",{value:"done",children:"Выполненные"}),_("option",{value:"not done",children:"Не выполненные"})]})};var Y,K,Z="_reset-button_9jh3y_1",z="_reset-icon_9jh3y_9";function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Q.apply(this,arguments)}var U=function(e){return h.exports.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:36,height:36,fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round"},e),"\x3c!--! Atomicons Free 1.00 by @atisalab License -\n    https://atomicons.com/license/ (Icons: CC BY 4.0) Copyright 2021 Atomicons --\x3e",Y||(Y=h.exports.createElement("path",{d:"M3 9h12.5a5.5 5.5 0 0 1 5.5 5.5h0a5.5 5.5 0 0 1-5.5 5.5H12"})),K||(K=h.exports.createElement("path",{d:"M8 4 3 9l5 5"})))};const X=()=>{const e=m();return _("button",{onClick:()=>e({type:x.RESET_TO_SAMPLES}),className:`button ${Z}`,children:_(U,{className:z})})};var ee="_app_1gc3m_27",te="_wrapper_1gc3m_38",re="_reset-button-wrapper_1gc3m_45",oe="_counter-wrapper_1gc3m_52";const ne=()=>u("div",{className:ee,children:[u("div",{className:te,children:[_("div",{className:re,children:_(X,{})}),_("div",{className:oe,children:_(j,{})})]}),_(P,{}),_(W,{}),_($,{})]});g.render(_(v.StrictMode,{children:_(f,{store:D,children:_(ne,{})})}),document.getElementById("root"));
